@startuml mastermindClases
namespace sanguino.mastermind {

    class MasterMind{
	    - void play()
	    + static void main(String[])
    }
}

namespace sanguino.mastermind.models {
    class Game {
        Game()
        + void reset()
        + void nextTurn(String proposed)
        + int getTurn()
        + String getProposedCombination()
        + long getResultBlacks(int)
        + long getResultWhites(int)
        + void isFinished()
        + void isWinner()
    }

    class Board {
        Board()
        + void reset()
        + void nextTurn(String proposed)
        + void isFinished()
        + int getTurn()
        + ProposedCombination getProposedCombination(int)
        + Result getResult(int)
    }

    abstract class Combination {
        + {static} NUMBER_COLORS
        - Color[] colors
    }

    class ProposedCombination extends Combination {
        ProposedCombination()
        + getColor
        + toString
    }

    class SecretCombination extends Combination {
        SecretCombination()
        + Result check(Combination)
    }

    class Result {
        - Success[] success
        Result(Success[])
        + long getBlacks()
        + long getWhites()
        + isWinner()
    }

    enum Color {
        RED
        BLUE
        YELLOW
        GREEN
        ORANGE
        PURPLE
        NULL_COLOR
        - char symbol
        - Color(char)
        + {static} Color getFromValue(char)
    }

    enum Success {
        WHITE
        BLACK
        NULL_SUCCESS
        - Success()
    }

    Game *-down-> Board
    Board o-down-> "0..10" ProposedCombination
    Board o-down-> SecretCombination
    Board o-down-> "0..10" Result
    Combination *-down-> "4" Color
    Result *-down-> "4" Success
}

namespace sanguino.mastermind.views {

    class GameView {
        - Game game
        void write()
    }

    class PlayView {
        - Game game
        void writeGameResult()
        void interact()
    }

    class ResumeView {
        boolean interact()
    }

    class StartView {
        - Game game
        void interact()
    }

    class View {
        - Game game
        - StartView startView
        - PlayView playView
        - ResumeView resumeView
        View(Game game)
        void interact()
    }

    enum Message {
        TITTLE
        ENTER_COMBINATION
        ATTEMPTS
        SECRET_CODE
        SEPARATOR
        RESULT
        PLAYER_WIN
        PLAYER_LOOSE
        RESUME
        NULL_MESSAGE
        - String message
        - Message(String)
        + void writeln()
        + void writeln(int)
        + void writeln(String, long, long)
    }

    View *-down-> StartView
    View *-down-> PlayView
    View *-down-> ResumeView

    PlayView .-down-> GameView
    GameView .-down-> Message
    PlayView .-down-> Message
    ResumeView .-down-> Message
    StartView .-down-> Message
    
}

namespace sanguino.utils {

    class Console {
        + static Console console
        + static Console instance()
        - BufferedReader bufferedReader
        + String readString(String)
        + String readString()
        + int readInt(String)
        + char readChar(String)
        + void writeln()
        + void write(String)
        + void write(int)
        + void writeln(String)
        + void writeln(int)
        + void write(char)
        + void writeError(String +)
    }

    class CombinationStringDialog { 
        - Error checkLength(String, int)
        - Error checkNotDuplicated(String)
        - Error checkCharacters(String)
        - Error checkErrors(String, int)
        + int read(String)
    }

    class YesNoDialog {
        - static final char AFFIRMATIVE
        - static final char NEGATIVE
        - static final String SUFFIX
        - static final String MESSAGE
        - char answer;
        + boolean read(String message)
        - boolean isAfirmative()
        - char getAnswer()
        - boolean isNegative()
    }

    enum Error {
        WRONG_LENGTH
        WRONG_COLOR
        WRONG_DUPLICATED
        NULL_ERROR
        - String message
        Error()
        Error(String)
        + void writeln()
    }

    YesNoDialog .-down-> Console
    CombinationStringDialog .-down-> Console
    CombinationStringDialog .-down-> Error
    Error .-down-> Console
}

sanguino.mastermind.MasterMind *-down-> sanguino.mastermind.models.Game
sanguino.mastermind.MasterMind *-down-> sanguino.mastermind.views.View

sanguino.mastermind.views.View .-down-> sanguino.mastermind.models.Game
sanguino.mastermind.views.StartView .-down-> sanguino.mastermind.models.Game
sanguino.mastermind.views.GameView .-down-> sanguino.mastermind.models.Game
sanguino.mastermind.views.PlayView .-down-> sanguino.mastermind.models.Game
sanguino.mastermind.views.PlayView .-down-> sanguino.utils.CombinationStringDialog
sanguino.mastermind.views.ResumeView .-down->  sanguino.utils.YesNoDialog
sanguino.mastermind.views.Message .-down-> sanguino.utils.Console

@enduml